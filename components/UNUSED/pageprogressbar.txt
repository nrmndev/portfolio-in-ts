import { useCallback, useEffect, useState } from "react";
const PageProgressBar = () => {
  const [progressBar, setProgressBar] = useState<number>(10);

  const handleScroll = useCallback((): void => {
    let position =
      ((window.scrollY + window.innerHeight) /
        document.documentElement.scrollHeight) *
      100;
    setProgressBar(position);
  }, []);

  useEffect(() => {
    if (progressBar > 0) {
      window.addEventListener("scroll", handleScroll);
    }

    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, [handleScroll, progressBar]);

  return (
    <div className="progressbar">
      <div
        className="progressbar_highlight"
        style={{ width: progressBar ? progressBar + "%" : "11%" }}
      ></div>
    </div>
  );
};

export default PageProgressBar;
